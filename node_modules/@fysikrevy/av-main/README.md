Det her er scriptet, der kører browser-delen af fysikrevyen™s
AV-system, og de tilhørende css-filer.

Selve præsentationen kan køre indlæst i en browser fra filsystemet,
men de mere avancerede funktioner (fjernstyringssiden, synkronisering
mellem flere sider, oversættelse af undertekstformater) kræver at de
bliver hentet via serverdelen
[sse-server](https://www.npmjs.com/package/@fysikrevy/sse-server).

# Hurtig start, på punktform

(0) Hent og installer [node.js](https://nodejs.org/). I tilfælde af
  tvivl, gå efter LTS versionen.
  
1. Lav en ny mappe til revyen, og naviger til den i en terminal.

2. Installer server-delen globalt.

        ] npm install -g @fysikrevy/sse-server

3. Start en ny `npm`-pakke, som kan holde styr på vores afhængigheder:

        ] npm init

   `npm` vil nu spørge efter en masse informationer. Siden det ikke er
   meningen, at denne pakke skal udgives i `npm` er det sikkert bare
   at skippe disse spørgsmål, ved at trykke enter ved hver.

4. Hent denne pakke.

        ] npm install @fysikrevy/av-main

5. Kopier filen `node_modules/@fysikrevy/av-main/revy-template.html` i
   din revymappe (kald den fx `revy.html`), og skriv dine overtekster
   dér.
   
    For automatisk omskrivning af .tex-filer til html, kig i
    [av-helpers](https://www.npmjs.com/package/@fysikrevy/av-helpers). Der
    er eksempler på hvad der kan stå i et revy-html-dokument i
    [av-demo](https://www.npmjs.com/package/@fysikrevy/av-demo). 
    
6. Start serveren, ved at skrive 

        ] sse-server
        
    Naviger et browser-vindue på projektoren til
    
        localhost/revy.html
        
    og et andet browser-vindue på din egen skærm til
    
        localhost/revy.remote
        
    Forhåbentlig giver fjernstyringssiden sig selv.
    
Hvad der skal stå i html-filen
==============================

`revy-template.html` giver skelettet af hvad scriptet forventer, at
der står i html-filen. Hvert `article`-element i `section`-elementet
bliver set som overteksterne til en sketch eller sang. Hvis
`article`-elementet har en `id`-attribut, bruger fjernstyringssiden
det som overskrift i oversigten.

Sangtekster
-----------

Sangtekster kommer til at være hovedparten af AV til en
revy. `article`-elementet der inheholder teksten til en sang bør have
klasserne `build` og `lyr`, og hver linje bør være i sit eget
`p`-element. For eksempel:

    <article class="build lyr">
      <p>Bamse og Kylling siger</p>
      <p>SPRÆNG!</p>
    </article>

Det kan være nødvendigt at have flere linjer synlige på samme tid,
eller bryde lange linjer om:

      <p>Det var i nitten-niogfyrre, <br /> eller circa deromkring</p>
    
For ikke at spolere en punchline kan vi skjule en del af en linje
indtil det rigtige øjeblik:

      <p class="build">Det er jo <span>Datalogen!</span></p>
      
Billeder
--------

`img`-elmentet kan bruges hvor som helst. Det kan være brugbart, hvis
et billede har sit eget `div`-element at bo i, så klassen `pagediv`
fylder sin forælder, og centrerer sit indhold. Et dias, som viser en
serie billeder i fuld skærm et ad gangen kan se ud som følger:

    <article class="build kill">
      <div class="pagediv"><img src="billeder/b1.jpg" height="100%"></div>
      <div class="pagediv"><img src="billeder/b2.jpg" height="100%"></div>
      <div class="pagediv"><img src="billeder/b3.jpg" height="100%"></div>
    </article>
    
Videoer
-------

Et dias med en video kan se ud som følger:

    <article class="vidframe build" id="bandintro" >
        <video preload="none" >
            <source src="fisk/Poisson.mp4" type="video/mp4" />
            <track src="fisk/Poisson.vtt" 
               kind="subtitles" 
	           srclang="da-DK" default />
        </video>
    </article>

Klassen `vidframe` sørger for, at videoer bliver skaleret
korrekt. 

Forudindlæsning er slået fra, ved at sætte `preload` til
`none`, for at forbedre genindlæsningstiden.

Det er for tiden videofiler i mp4 (h.264) format, der har den bedste
chance for at være kompatibel med en given browser. Nogen specifikke
browsere har bredere kompatibilitet, men skal under alle
omstændigheder helst have at vide hvilken type videofil de får, via
`type`-parameteren. Hvis dine fiskekreatørere giver dig videoer i
ubrugelige formater, så er der altid
[handbrake](https://handbrake.fr/).

Vtt-formatet bruges til undertekster i browsere og *ingen andre
steder* (Citation needed). Derfor kan server-delen konvertere .srt og
.ass filer til vtt on-the-fly, så længe de har det samme navn, op til
filtypenavnet.

Versioner
---------

###### 1.1.1 - 1.1.3

> Fixet interaktionen mellem `prev`, `last-built` og `auto` (det burde
> fungere bedre, at gå baglæns i en slide). Introduceret jquery som
> afhængighed, for et nemmere liv. Introduceret `.build-me` som
> alternativ til `.build > *`.

##### 1.1.0 #####
> Fix: Kan lave mellemrum i d-linjer igen. 
> Ny implementering af mimic-mekanisme. Kan nu afspille
> videoer. Muligvis begrænset bagud-kompatabilitet.

Link til direkte download:  
<!-- [ftp://mail.levinhansen.dk/av-main-1.0.0.tgz](ftp://mail.levinhansen.dk/av-main-1.0.0.tgz) -->
<ftp://mail.levinhansen.dk/av-main-1.1.0.tgz>
